<!DOCTYPE html> <!-- Type on Strap jekyll theme v2.0.0 Copyright 2016-2019 Sylhare Theme free for personal and commercial use under the MIT license https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE --> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> <!-- CSS --> <link rel="stylesheet" href="/assets/css/main.css"> <!--Favicon--> <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon"> <!-- Canonical --> <link rel="canonical" href="https://tech-lessons.in/lets-deal-with-legacy-code/"> <!-- KaTeX 0.8.3 --> <!-- if you have any issue check https://github.com/KaTeX/KaTeX --> <!-- Google Analytics --> <!-- End Google Analytics --> <!-- seo tags --> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Let’s deal with Legacy Code | tech-lessons.in</title> <meta name="generator" content="Jekyll v4.2.1" /> <meta property="og:title" content="Let’s deal with Legacy Code" /> <meta name="author" content="Sarthak Makhija" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="This article is in continuation with the previous article “Let’s Define Legacy Code” where we defined Legacy Code. Let’s understand Broken Window Theory and add a new feature to Legacy Code." /> <meta property="og:description" content="This article is in continuation with the previous article “Let’s Define Legacy Code” where we defined Legacy Code. Let’s understand Broken Window Theory and add a new feature to Legacy Code." /> <link rel="canonical" href="https://tech-lessons.in/lets-deal-with-legacy-code/" /> <meta property="og:url" content="https://tech-lessons.in/lets-deal-with-legacy-code/" /> <meta property="og:site_name" content="tech-lessons.in" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2018-04-12T19:58:25+05:30" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Let’s deal with Legacy Code" /> <script type="application/ld+json"> {"url":"https://tech-lessons.in/lets-deal-with-legacy-code/","author":{"@type":"Person","name":"Sarthak Makhija"},"headline":"Let’s deal with Legacy Code","dateModified":"2018-04-12T19:58:25+05:30","datePublished":"2018-04-12T19:58:25+05:30","@type":"BlogPosting","description":"This article is in continuation with the previous article “Let’s Define Legacy Code” where we defined Legacy Code. Let’s understand Broken Window Theory and add a new feature to Legacy Code.","mainEntityOfPage":{"@type":"WebPage","@id":"https://tech-lessons.in/lets-deal-with-legacy-code/"},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <!-- Manual seo tags --> <!-- <title>Let’s deal with Legacy Code | tech-lessons.in</title> <meta name="description" content="This article is in continuation with the previous article "Let’s Define Legacy Code" where we defined Legacy Code. Let's understand Broken Window Theory and ..."> --> </head> <script defer=true src="/assets/js/main.min.js"></script> <body> <header class="site-header"> <!-- Toggle menu --> <nav class="clear"> <a aria-label="pull" id="pull" class="toggle" href="#"> <i class="fa fa-bars fa-lg"></i> </a> <!-- Brand Logo --> <a class="navbar-brand" href="/"> <img src="/assets/img/pexels/logo.png" alt="tech-lessons" title="tech-lessons"> </a> <!-- Menu --> <ul class="hide"> <li class="separator"> |</li> <li> <a class="clear" aria-label="Home" title="Home" href="/"> <i class="fa fa-fw fa-home" aria-hidden="true"></i> Home </a> </li> <li class="separator"> |</li> <li> <a class="clear" aria-label="Search" title="Search" href="/search/"> <i class="fa fa-fw fa-search" aria-hidden="true"></i> Search </a> </li> <li class="separator"> |</li> <li> <a class="clear" aria-label="Tags" title="Tags" href="/tags/"> <i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags </a> </li> <li class="separator"> |</li> <li> <a class="clear" aria-label="About Me" title="About Me" href="/about/"> <i class="fa fa-fw fa-male" aria-hidden="true"></i> About Me </a> </li> </ul> </nav> </header> <div class="content"> <meta property="og:url" content="/lets-deal-with-legacy-code/" /> <meta property="og:type" content="article" /> <meta property="og:title" content="Let’s deal with Legacy Code" /> <meta property="og:description" content="This article is in continuation with the previous article &quot;Let’s Define Legacy Code&quot; where we defined Legacy Code. Let&#39;s understand Broken Window Theory and add a new feature to Legacy Code." /> <meta property="og:image" content="assets/img/pexels/legacy1.jpg" /> <article class="feature-image"> <header id="main" style=""></header> <section class="post-content"> <h1 id="Let%E2%80%99s+deal+with+Legacy+Code" class="title">Let’s deal with Legacy Code</h1> <p id="d8ad" class="graf graf--p graf-after--h3">This article is in continuation with the <a href="/lets-define-legacy-code/">previous article</a> where we defined some of the key aspects of Legacy Code. In this article we will take a Legacy code and add a new feature to it.</p> <p id="bec2" class="graf graf--p graf-after--p">Before we begin with an example, let’s take a moment to understand <em class="markup--em markup--p-em">Broken Window Theory.</em></p> <p class="align-center"><img class="aligncenter wp-image-88 size-medium" title="Broken Window Theory" src="/assets/img/pexels/broken-window.jpeg" alt="Broken Window Theory" /></p> <h4 id="0735" class="graf graf--h4 graf-after--figure">Broken Window Theory</h4> <p id="533a" class="graf graf--p graf-after--h4">An<strong class="markup--strong markup--p-strong"> </strong>academic theory proposed by James Q. Wilson and George Kelling in 1982 that used broken windows as a metaphor for disorder within neighbourhoods.</p> <blockquote id="e670" class="graf graf--pullquote graf-after--p"><p>One broken window, if left unrepaired for a substantial amount of time, instills a sense of abandonment. So another window gets broken. People start littering. Graffiti appears. Serious structural damage begins. In a relatively short time, the building becomes damaged beyond the owner’s desire to fix it, and the sense of abandonment becomes reality.</p></blockquote> <p id="4401" class="graf graf--p graf-after--pullquote">Let’s not abandon our code, let’s repair the code as soon as we get an opportunity to repair it and let’s not get ourselves into a situation where damage is beyond our capacity to fix. Let’s see our theory in action.</p> <h4 id="1575" class="graf graf--h4 graf-after--p">Problem Definition Overview</h4> <p id="1f4e" class="graf graf--p graf-after--h4">The below code belongs to a hypothetical application “Movie Rental” which allows its customers to rent either a Regular or a Children’s movies for fixed number of days. The application also allows generation of a statement which the business calls as “Text Statement”. This application has been running in Production for a long time without issues and has become very popular. Now business wants to generate an HTML statement with exact same logic for amount computation.</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Customer</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Rental</span><span class="o">&gt;</span> <span class="n">rentals</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">Customer</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addRental</span><span class="o">(</span><span class="nc">Rental</span> <span class="n">arg</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">rentals</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">arg</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">statement</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">totalAmount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="s">"Rental Record for "</span> <span class="o">+</span> <span class="n">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Rental</span> <span class="n">each</span> <span class="o">:</span> <span class="n">rentals</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">double</span> <span class="n">thisAmount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

            <span class="c1">//determine amounts for each line</span>
            <span class="k">switch</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getMovie</span><span class="o">().</span><span class="na">getPriceCode</span><span class="o">())</span> <span class="o">{</span>
                <span class="k">case</span> <span class="nc">Movie</span><span class="o">.</span><span class="na">REGULAR</span><span class="o">:</span>
                    <span class="n">thisAmount</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">;</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">)</span>
                        <span class="n">thisAmount</span> <span class="o">+=</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">-</span> <span class="mi">2</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nc">Movie</span><span class="o">.</span><span class="na">CHILDRENS</span><span class="o">:</span>
                    <span class="n">thisAmount</span> <span class="o">+=</span> <span class="mf">1.5</span><span class="o">;</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">)</span>
                        <span class="n">thisAmount</span> <span class="o">+=</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">-</span> <span class="mi">3</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="c1">//show figures for this Rental</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="n">each</span><span class="o">.</span><span class="na">getMovie</span><span class="o">().</span><span class="na">getTitle</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\t"</span> <span class="o">+</span>
                    <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">thisAmount</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
            <span class="n">totalAmount</span> <span class="o">+=</span> <span class="n">thisAmount</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="c1">//add footer lines result</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s">"Amount owed is "</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">totalAmount</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Movie</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">CHILDRENS</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">REGULAR</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">priceCode</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Movie</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">,</span> <span class="kt">int</span> <span class="n">priceCode</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">priceCode</span> <span class="o">=</span> <span class="n">priceCode</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">//getters ignored</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Rental</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">daysRented</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Movie</span> <span class="n">movie</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Rental</span><span class="o">(</span><span class="nc">Movie</span> <span class="n">movie</span><span class="o">,</span> <span class="kt">int</span> <span class="n">daysRented</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">movie</span> <span class="o">=</span> <span class="n">movie</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">daysRented</span> <span class="o">=</span> <span class="n">daysRented</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">//getters ignored</span>
<span class="o">}</span></code></pre></figure> <p>The team decides to discuss different ways to handle this new requirement in legacy code.</p> <p> <iframe width="800" height="400" src="https://www.youtube.com/embed/aGGoW8YENKo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> </p> <p id="a254" class="graf graf--p graf-after--figure">And the team agrees to improve the code before implementing the new functionality. Scott and Jessica will be pairing on this. But, where do they start from? As mentioned in their discussion, they need to understand the code first so they decide to write Characterization Test(s).</p> <h4 id="706f" class="graf graf--h4 graf-after--p">First Characterization Test</h4> <p id="0928" class="graf graf--p graf-after--h4">Scott&gt; How many tests should we write?</p> <p id="927f" class="graf graf--p graf-after--p">Jessica&gt; Let’s look at the code. It should give us some hints.</p> <p id="6d15" class="graf graf--p graf-after--p">Scott&gt; I get it. We need a few rentals consisting of Regular and Children’s movie and the number of days rented for which these movies can be greater than 2 or 3. So, one test should cover a <strong class="markup--strong markup--p-strong">decent</strong> functionality.</p> <p id="00b8" class="graf graf--p graf-after--p">Jessica&gt; I can’t agree more. So let’s write it then.</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomerUnitTest</span> <span class="o">{</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldGenerateStatement</span><span class="o">(){</span>
        <span class="nc">Customer</span> <span class="n">john</span>      <span class="o">=</span> <span class="k">new</span> <span class="nc">Customer</span><span class="o">(</span><span class="s">"John"</span><span class="o">);</span>
        <span class="nc">Movie</span>    <span class="n">regular</span>   <span class="o">=</span> <span class="k">new</span> <span class="nc">Movie</span><span class="o">(</span><span class="s">"Black Panther"</span><span class="o">,</span> <span class="no">REGULAR</span><span class="o">);</span>
        <span class="nc">Movie</span>    <span class="n">children</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">Movie</span><span class="o">(</span><span class="s">"Lion King"</span><span class="o">,</span>     <span class="no">CHILDRENS</span><span class="o">);</span>
        <span class="nc">Rental</span> <span class="n">rental1</span>     <span class="o">=</span> <span class="k">new</span> <span class="nc">Rental</span><span class="o">(</span><span class="n">regular</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>  
        <span class="nc">Rental</span> <span class="n">rental2</span>     <span class="o">=</span> <span class="k">new</span> <span class="nc">Rental</span><span class="o">(</span><span class="n">children</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
        <span class="n">john</span><span class="o">.</span><span class="na">addRental</span><span class="o">(</span><span class="n">rental1</span><span class="o">);</span>
        <span class="n">john</span><span class="o">.</span><span class="na">addRental</span><span class="o">(</span><span class="n">rental2</span><span class="o">);</span>
        
        <span class="nc">String</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">john</span><span class="o">.</span><span class="na">statement</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="n">statement</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure> <p>Scott&gt; Let’s run this and see it fail.</p> <div class="highlighter-rouge"><pre id="7bb8" class="graf graf--pre graf-after--p">org.junit.ComparisonFailure:
Expected: ""
Actual:
Rental Record for John
 Black Panther 3.5
 Lion King 3.0
Amount owed is 6.5
</pre></div> <p>Jessica&gt; Great. We have made some progress. Let’s correct our test.</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomerUnitTest</span> <span class="o">{</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldGenerateStatement</span><span class="o">(){</span>
        <span class="nc">String</span> <span class="n">expected</span> <span class="o">=</span> <span class="s">"Rental Record for John\n"</span> <span class="o">+</span>
                <span class="s">"\tBlack Panther\t3.5\n"</span> <span class="o">+</span>
                <span class="s">"\tLion King\t3.0\n"</span> <span class="o">+</span>
                <span class="s">"Amount owed is 6.5\n"</span><span class="o">;</span>
        
        <span class="nc">Customer</span> <span class="n">john</span>      <span class="o">=</span> <span class="k">new</span> <span class="nc">Customer</span><span class="o">(</span><span class="s">"John"</span><span class="o">);</span>
        <span class="nc">Movie</span>    <span class="n">regular</span>   <span class="o">=</span> <span class="k">new</span> <span class="nc">Movie</span><span class="o">(</span><span class="s">"Black Panther"</span><span class="o">,</span> <span class="no">REGULAR</span><span class="o">);</span>
        <span class="nc">Movie</span>    <span class="n">children</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">Movie</span><span class="o">(</span><span class="s">"Lion King"</span><span class="o">,</span>     <span class="no">CHILDRENS</span><span class="o">);</span>
        <span class="nc">Rental</span> <span class="n">rental1</span>     <span class="o">=</span> <span class="k">new</span> <span class="nc">Rental</span><span class="o">(</span><span class="n">regular</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
        <span class="nc">Rental</span> <span class="n">rental2</span>     <span class="o">=</span> <span class="k">new</span> <span class="nc">Rental</span><span class="o">(</span><span class="n">children</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
        <span class="n">john</span><span class="o">.</span><span class="na">addRental</span><span class="o">(</span><span class="n">rental1</span><span class="o">);</span>
        <span class="n">john</span><span class="o">.</span><span class="na">addRental</span><span class="o">(</span><span class="n">rental2</span><span class="o">);</span>
        
        <span class="nc">String</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">john</span><span class="o">.</span><span class="na">statement</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">expected</span><span class="o">,</span> <span class="n">statement</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure> <p><em>Jessica and Scott agree to write one test case covering a decent portion of the code. If this gives us confidence, we can live with one test for now else we can write a few more or include movies with daysRented &lt; 2.</em></p> <p id="8a8b" class="graf graf--p graf-after--blockquote">Scott&gt; Jessica, what type of test should a Characterization test be? Unit, Functional, Integration?</p> <p id="03f9" class="graf graf--p graf-after--p">Jessica&gt; Scott, it is not always possible to write unit or functional tests for legacy code. You might end up writing an <em class="markup--em markup--p-em">integration test</em> to begin with because you just want to know what system does. But, as soon as you get an opportunity, get your tests closer to the code.</p> <p id="b979" class="graf graf--p graf-after--p">Scott&gt; Sure Jessica, let’s start the fun part. Let’s fix a broken window.</p> <h4 id="9ff0" class="graf graf--h4 graf-after--p">Refactoring</h4> <p id="3257" class="graf graf--p graf-after--h4">Scott&gt; Where do we start from?</p> <p id="935c" class="graf graf--p graf-after--p">Jessica&gt; I believe statement() method is a long method. We should try and make it a little shorter.</p> <p id="5a47" class="graf graf--p graf-after--p">Scott&gt; Agreed.</p> <p><em>Jessica and Scott agreed that statement() method is a long method. But, this agreement was not based on the number of lines in the method. It was based on how easy it is to comprehend the method or is a method doing more than one thing at a time or it can be decomposed further.</em></p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nc">String</span> <span class="nf">statement</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">totalAmount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="s">"Rental Record for "</span> <span class="o">+</span> <span class="n">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Rental</span> <span class="n">each</span> <span class="o">:</span> <span class="nc">Rentals</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//determine amounts for each line</span>
        <span class="kt">double</span> <span class="n">thisAmount</span> <span class="o">=</span> <span class="n">amount</span><span class="o">(</span><span class="n">each</span><span class="o">);</span>

        <span class="c1">//show figures for this Rental</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="n">each</span><span class="o">.</span><span class="na">getMovie</span><span class="o">().</span><span class="na">getTitle</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">thisAmount</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
        <span class="n">totalAmount</span> <span class="o">+=</span> <span class="n">thisAmount</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">//add footer lines result</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="s">"Amount owed is "</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">totalAmount</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">double</span> <span class="nf">amount</span><span class="o">(</span><span class="nc">Rental</span> <span class="n">each</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">thisAmount</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
    <span class="k">switch</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getMovie</span><span class="o">().</span><span class="na">getPriceCode</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">case</span> <span class="nc">Movie</span><span class="o">.</span><span class="na">REGULAR</span><span class="o">:</span>
            <span class="n">thisAmount</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">)</span>
                <span class="n">thisAmount</span> <span class="o">+=</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">-</span> <span class="mi">2</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="k">case</span> <span class="nc">Movie</span><span class="o">.</span><span class="na">CHILDRENS</span><span class="o">:</span>
            <span class="n">thisAmount</span> <span class="o">+=</span> <span class="mf">1.5</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">)</span>
                <span class="n">thisAmount</span> <span class="o">+=</span> <span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">-</span> <span class="mi">3</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">thisAmount</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure> <p id="4d36" class="graf graf--p graf-after--figure">Jessica&gt; Switch statement has gone out and the extracted amount() method does one thing which is getting amount for a given rental.</p> <p id="8b87" class="graf graf--p graf-after--p">Scott&gt; Let’s continue refactoring. I am in a mood to clean up everything.</p> <p id="0ac2" class="graf graf--p graf-after--p">Jessica&gt; Hold on Scott, we need to run tests before we move on.</p> <p id="356e" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">And the test ran successfully.</em></p> <p><em>While working with Legacy Code it is important to take smaller steps and follow refactoring cycle. Refactor -&gt; Run Tests -&gt; Refactor</em></p> <p id="f267" class="graf graf--p graf-after--blockquote">Scott&gt; Sure. Jessica, are we in a position to remove the comment <em class="markup--em markup--p-em">“determine amounts for each line” from previous code?</em></p> <p id="9609" class="graf graf--p graf-after--p">Jessica&gt; Yes, we can remove it.</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nc">String</span> <span class="nf">statement</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">totalAmount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="s">"Rental Record for "</span> <span class="o">+</span> <span class="n">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Rental</span> <span class="n">rental</span> <span class="o">:</span> <span class="nc">Rentals</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">thisAmount</span> <span class="o">=</span> <span class="n">amount</span><span class="o">(</span><span class="n">rental</span><span class="o">);</span>

        <span class="c1">//show figures for this Rental</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="n">rental</span><span class="o">.</span><span class="na">getMovie</span><span class="o">().</span><span class="na">getTitle</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">thisAmount</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
        <span class="n">totalAmount</span> <span class="o">+=</span> <span class="n">thisAmount</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">//add footer lines result</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="s">"Amount owed is "</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">totalAmount</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">double</span> <span class="nf">amount</span><span class="o">(</span><span class="nc">Rental</span> <span class="n">rental</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">thisAmount</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
    <span class="k">switch</span> <span class="o">(</span><span class="n">rental</span><span class="o">.</span><span class="na">getMovie</span><span class="o">().</span><span class="na">getPriceCode</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">case</span> <span class="nc">Movie</span><span class="o">.</span><span class="na">REGULAR</span><span class="o">:</span>
            <span class="n">thisAmount</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">rental</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">)</span>
                <span class="n">thisAmount</span> <span class="o">+=</span> <span class="o">(</span><span class="n">rental</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">-</span> <span class="mi">2</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="k">case</span> <span class="nc">Movie</span><span class="o">.</span><span class="na">CHILDRENS</span><span class="o">:</span>
            <span class="n">thisAmount</span> <span class="o">+=</span> <span class="mf">1.5</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">rental</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">)</span>
                <span class="n">thisAmount</span> <span class="o">+=</span> <span class="o">(</span><span class="n">rental</span><span class="o">.</span><span class="na">getDaysRented</span><span class="o">()</span> <span class="o">-</span> <span class="mi">3</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">thisAmount</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure> <p><em>Remove comments from legacy code when you have captured their complete essence . Though I did take some liberty to rename variable along with removing comment, it is always ideal to take smaller steps when you are beginning to understand legacy code. As you grow in confidence, you might want to take bigger steps but one test failure and the reality reveals itself.</em></p> <p id="49cd" class="graf graf--p graf-after--blockquote">Scott&gt; Let’s look at amount() method. It depends on priceCode from movie but is placed in Customer. We should move this method to the place where it belongs.</p> <p id="e000" class="graf graf--p graf-after--p">Jessica&gt; Yes, let’s do a few method movements (in the interest of this article).</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">//Customer</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">statement</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">totalAmount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="s">"Rental Record for "</span> <span class="o">+</span> <span class="n">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Rental</span> <span class="n">rental</span> <span class="o">:</span> <span class="nc">Rentals</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">thisAmount</span> <span class="o">=</span> <span class="n">rental</span><span class="o">.</span><span class="na">amount</span><span class="o">();</span>

        <span class="c1">//show figures for this Rental</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="n">rental</span><span class="o">.</span><span class="na">movieTitle</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">thisAmount</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
        <span class="n">totalAmount</span> <span class="o">+=</span> <span class="n">thisAmount</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">//add footer lines result</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="s">"Amount owed is "</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">totalAmount</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">//Rental</span>
<span class="kt">double</span> <span class="nf">amount</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">movie</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">daysRented</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">//Movie</span>
<span class="kt">double</span> <span class="nf">amount</span><span class="o">(</span><span class="kt">int</span> <span class="n">daysRented</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">thisAmount</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
    <span class="k">switch</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getPriceCode</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">case</span> <span class="nc">Movie</span><span class="o">.</span><span class="na">REGULAR</span><span class="o">:</span>
            <span class="n">thisAmount</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">daysRented</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">)</span>
                <span class="n">thisAmount</span> <span class="o">+=</span> <span class="o">(</span><span class="n">daysRented</span> <span class="o">-</span> <span class="mi">2</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="k">case</span> <span class="nc">Movie</span><span class="o">.</span><span class="na">CHILDRENS</span><span class="o">:</span>
            <span class="n">thisAmount</span> <span class="o">+=</span> <span class="mf">1.5</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">daysRented</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">)</span>
                <span class="n">thisAmount</span> <span class="o">+=</span> <span class="o">(</span><span class="n">daysRented</span> <span class="o">-</span> <span class="mi">3</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">thisAmount</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure> <p><em>I did a few movements. Moved amount() method to Rental and then to Movie and ran the tests. It should be noted that this is our first opportunity to write unit tests for Rental and Movie. I won’t, for this article, but I assume you will.</em></p> <p id="7db7" class="graf graf--p graf-after--blockquote">Scott&gt; Jessica, I have a question. Movie has a switch statement based on different types of movies. Shall we introduce some polymorphism here?</p> <p id="98cd" class="graf graf--p graf-after--p">Jessica&gt; I don’t think it is coming in our way of implementing HTML statement functionality.</p> <blockquote id="8392" class="graf graf--blockquote graf-after--p"><p>Scott has raised a valid point but we need to remember one thing, “we refactor the code which comes in our way”. At this point in time, we need to implement HTML statement and switch code does not come in the way of our new feature, neither do the magic numbers 2 or 1.5. If you want to continue with small refactorings which are not coming in your way, say changing Magic Numbers to Constants, go ahead and do it but do not move away from your actual task: implementing HTML statement.</p></blockquote> <p id="9c99" class="graf graf--p graf-after--blockquote">Scott&gt; I get that. Thank you. The statement() method in Customer is short enough. Shall we pause our refactoring here?</p> <p id="4221" class="graf graf--p graf-after--p">Jessica&gt; We could, but one thing that is bothering me is this method seems to be generating 3 parts of the statement and I can see it clearly — header, body and footer. <em class="markup--em markup--p-em">If the effort is not huge</em> we should try and extract this code into different methods.</p> <p id="19cb" class="graf graf--p graf-after--p">Scott&gt; You clearly have an eye for refactoring. Let’s do it.</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nc">String</span> <span class="nf">textStatement</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">textHeader</span><span class="o">()</span> <span class="o">+</span> <span class="n">textBody</span><span class="o">()</span> <span class="o">+</span> <span class="n">textFooter</span><span class="o">();</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="nf">textHeader</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">"Rental Record for "</span> <span class="o">+</span> <span class="n">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="nf">textBody</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Rental</span> <span class="n">rental</span> <span class="o">:</span> <span class="nc">Rentals</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="n">rental</span><span class="o">.</span><span class="na">movieTitle</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">rental</span><span class="o">.</span><span class="na">amount</span><span class="o">())</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="nf">textFooter</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">"Amount owed is "</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">totalAmount</span><span class="o">())</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kt">double</span> <span class="nf">totalAmount</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">totalAmount</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Rental</span> <span class="n">rental</span> <span class="o">:</span> <span class="nc">Rentals</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">totalAmount</span> <span class="o">+=</span> <span class="n">rental</span><span class="o">.</span><span class="na">amount</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">totalAmount</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure> <p><em>I cheated again. Did lot more than what I should have done,renamed methods to be <strong class="markup--strong markup--blockquote-strong">text*,</strong> duplicated for loops (over rentals) to calculate totalAmount(), repeated the same in textBody().</em></p> <p><em>Is that justified? Well, how many rentals do we expect to have for a customer? What is the cost of iterating over them twice? If it is not significant, go ahead and use it. What does it give me? Look at the statement() (renamed as textStatement()) method now.</em></p> <p id="5e8c" class="graf graf--p graf-after--blockquote">Jessica&gt; Now, we are done with refactoring. We can introduce HTML statement functionality now.</p> <h4 id="76b1" class="graf graf--h4 graf-after--p">Conclusion</h4> <p id="9010" class="graf graf--p graf-after--h4"><em class="markup--em markup--p-em">Jessica and Scott went on to implement HTML functionality (with tests) and they did a lot to clean up the existing code. This is much more understandable that it used to be.</em></p> <p id="7e4d" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">They might not have cleaned up everything but they clearly have left a great deal of understanding trace for others to follow.</em></p> <p id="1251" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">They followed Cover and Modify, Boy Scout rule, Refactoring Cycle and refactored enough to finish the new functionality, in-short dealt with Legacy Code professionally.</em></p> <h4 id="d3d3" class="graf graf--h4 graf-after--p">References</h4> <ul class="postList"> <li id="0493" class="graf graf--li graf-after--h4">Refactoring — Improving The Design Of Existing Code</li> <li id="98d5" class="graf graf--li graf-after--li graf--trailing"><a class="markup--anchor markup--li-anchor" href="https://refactoring.com/catalog/" target="_blank" rel="noopener nofollow" data-href="https://refactoring.com/catalog/">Refactoring Catalog</a></li> </ul> </section> <!-- Social media shares --> <div class="share-buttons"> <ul class="share-buttons"> <div class="meta">Share</div> <li> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftech-lessons.in%2Flets-deal-with-legacy-code%2F" target="_blank" title=" Facebook"> <i class="fa fa-facebook-square fa-2x" aria-hidden="true"></i> <span class="sr-only">Share on Facebook</span> </a> </li> <li> <a href="https://twitter.com/intent/tweet?text=Let%E2%80%99s+deal+with+Legacy+Code%20https%3A%2F%2Ftech-lessons.in%2Flets-deal-with-legacy-code%2F" target="_blank" title=""> <i class="fa fa-twitter-square fa-2x" aria-hidden="true"></i> <span class="sr-only">Tweet</span> </a> </li> <li> <a href="http://www.linkedin.com/shareArticle?mini=true&url=https://tech-lessons.in/lets-deal-with-legacy-code/&title=Let%E2%80%99s+deal+with+Legacy+Code%20%7C%20tech-lessons.in&summary=&source=https://tech-lessons.in/lets-deal-with-legacy-code/" target="_blank" title=" LinkedIn"> <i class="fa fa-linkedin fa-2x" aria-hidden="true"></i> <span class="sr-only">Share on LinkedIn</span> </a> </li> </ul> </div> <!-- Tag list --> <footer> <div class="tag-list"> <div class="meta">Tags</div> <a class="button" href="/tags#Broken+Window+Theory"> <p><i class="fa fa-tag fa-fw"></i> Broken Window Theory</p> </a> <a class="button" href="/tags#Legacy+Code"> <p><i class="fa fa-tag fa-fw"></i> Legacy Code</p> </a> <a class="button" href="/tags#Refactoring"> <p><i class="fa fa-tag fa-fw"></i> Refactoring</p> </a> </div> </footer> </article> <!-- Disqus --> <div class="comments"> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'techlessons'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view comments.</noscript> </div> <!-- Post navigation --> <div id="post-nav"> <div id="previous-post"> <a alt="Kotlin Wishlist for Java" href="/kotlin-wishlist-for-java/"> <p>Previous post</p> Kotlin Wishlist for Java </a> </div> <div id="next-post"> <a alt="Let’s define Legacy Code" href="/lets-define-legacy-code/"> <p>Next post</p> Let’s define Legacy Code </a> </div> </div> <!-- To change color of links in the page --> <style> header#main { background-repeat:no-repeat; background-image: url('/assets/img/pexels/legacy1.jpg'); } </style> </div> <footer class="site-footer"> <p class="text"> tech-lessons.in © 2020. All Rights Reserved. Powered by <a href='https://jekyllrb.com/'>Jekyll</a> </p> <div class="footer-icons"> <ul> <li> <a href="https://github.com/sarthakmakhija" title="Follow on GitHub"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="https://www.linkedin.com/in/sarthak-makhija-7a165a55/" title="Follow on LinkedIn"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </li> </ul> <ul> </ul> </div> </footer> </body> </html>
